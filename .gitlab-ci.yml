stages:
  - tests_cpu
  - tests_gpu

#image used to run code
variables:
  singularity_image: /storage/user/jpata/cupy2.simg

tests_cpu:
  stage: tests_cpu
  script:
    - HEPACCELERATE_CUDA=0 singularity exec ${singularity_image} python3 setup.py test

tests_cuda:
  stage: tests_gpu
  script:
    - HEPACCELERATE_CUDA=1 singularity exec ${singularity_image} python3 setup.py test
